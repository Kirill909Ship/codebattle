var I=globalThis&&globalThis.__awaiter||function(n,i,e,o){function u(t){return t instanceof e?t:new e(function(s){s(t)})}return new(e||(e=Promise))(function(t,s){function f(a){try{r(o.next(a))}catch(l){s(l)}}function c(a){try{r(o.throw(a))}catch(l){s(l)}}function r(a){a.done?t(a.value):u(a.value).then(f,c)}r((o=o.apply(n,i||[])).next())})},R=globalThis&&globalThis.__generator||function(n,i){var e={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,u,t,s;return s={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function f(r){return function(a){return c([r,a])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;e;)try{if(o=1,u&&(t=r[0]&2?u.return:r[0]?u.throw||((t=u.return)&&t.call(u),0):u.next)&&!(t=t.call(u,r[1])).done)return t;switch(u=0,t&&(r=[r[0]&2,t.value]),r[0]){case 0:case 1:t=r;break;case 4:return e.label++,{value:r[1],done:!1};case 5:e.label++,u=r[1],r=[0];continue;case 7:r=e.ops.pop(),e.trys.pop();continue;default:if(t=e.trys,!(t=t.length>0&&t[t.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!t||r[1]>t[0]&&r[1]<t[3])){e.label=r[1];break}if(r[0]===6&&e.label<t[1]){e.label=t[1],t=r;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(r);break}t[2]&&e.ops.pop(),e.trys.pop();continue}r=i.call(n,e)}catch(a){r=[6,a],u=0}finally{o=t=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},F=function(){function n(i,e){var o=this;this._modeId=i,this._defaults=e,this._worker=null,this._client=null,this._configChangeListener=this._defaults.onDidChange(function(){return o._stopWorker()}),this._updateExtraLibsToken=0,this._extraLibsChangeListener=this._defaults.onDidExtraLibsChange(function(){return o._updateExtraLibs()})}return n.prototype._stopWorker=function(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null},n.prototype.dispose=function(){this._configChangeListener.dispose(),this._extraLibsChangeListener.dispose(),this._stopWorker()},n.prototype._updateExtraLibs=function(){return I(this,void 0,void 0,function(){var i,e;return R(this,function(o){switch(o.label){case 0:return this._worker?(i=++this._updateExtraLibsToken,[4,this._worker.getProxy()]):[2];case 1:return e=o.sent(),this._updateExtraLibsToken!==i?[2]:(e.updateExtraLibs(this._defaults.getExtraLibs()),[2])}})})},n.prototype._getClient=function(){var i=this;if(!this._client){this._worker=monaco.editor.createWebWorker({moduleId:"vs/language/typescript/tsWorker",label:this._modeId,keepIdleModels:!0,createData:{compilerOptions:this._defaults.getCompilerOptions(),extraLibs:this._defaults.getExtraLibs()}});var e=this._worker.getProxy();this._defaults.getEagerModelSync()&&(e=e.then(function(o){return i._worker?i._worker.withSyncedResources(monaco.editor.getModels().filter(function(u){return u.getModeId()===i._modeId}).map(function(u){return u.uri})):o})),this._client=e}return this._client},n.prototype.getLanguageServiceWorker=function(){for(var i=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var u;return this._getClient().then(function(t){u=t}).then(function(t){if(i._worker)return i._worker.withSyncedResources(e)}).then(function(t){return u})},n}(),w=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var t in u)u.hasOwnProperty(t)&&(o[t]=u[t])},n(i,e)};return function(i,e){n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),y=globalThis&&globalThis.__awaiter||function(n,i,e,o){function u(t){return t instanceof e?t:new e(function(s){s(t)})}return new(e||(e=Promise))(function(t,s){function f(a){try{r(o.next(a))}catch(l){s(l)}}function c(a){try{r(o.throw(a))}catch(l){s(l)}}function r(a){a.done?t(a.value):u(a.value).then(f,c)}r((o=o.apply(n,i||[])).next())})},S=globalThis&&globalThis.__generator||function(n,i){var e={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,u,t,s;return s={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function f(r){return function(a){return c([r,a])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;e;)try{if(o=1,u&&(t=r[0]&2?u.return:r[0]?u.throw||((t=u.return)&&t.call(u),0):u.next)&&!(t=t.call(u,r[1])).done)return t;switch(u=0,t&&(r=[r[0]&2,t.value]),r[0]){case 0:case 1:t=r;break;case 4:return e.label++,{value:r[1],done:!1};case 5:e.label++,u=r[1],r=[0];continue;case 7:r=e.ops.pop(),e.trys.pop();continue;default:if(t=e.trys,!(t=t.length>0&&t[t.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!t||r[1]>t[0]&&r[1]<t[3])){e.label=r[1];break}if(r[0]===6&&e.label<t[1]){e.label=t[1],t=r;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(r);break}t[2]&&e.ops.pop(),e.trys.pop();continue}r=i.call(n,e)}catch(a){r=[6,a],u=0}finally{o=t=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},L=monaco.Uri,N=monaco.Range,T;(function(n){n[n.None=0]="None",n[n.Block=1]="Block",n[n.Smart=2]="Smart"})(T||(T={}));function O(n,i,e){if(e===void 0&&(e=0),typeof n=="string")return n;if(n===void 0)return"";var o="";if(e){o+=i;for(var u=0;u<e;u++)o+="  "}if(o+=n.messageText,e++,n.next)for(var t=0,s=n.next;t<s.length;t++){var f=s[t];o+=O(f,i,e)}return o}function k(n){return n?n.map(function(i){return i.text}).join(""):""}var _=function(){function n(i){this._worker=i}return n.prototype._textSpanToRange=function(i,e){var o=i.getPositionAt(e.start),u=i.getPositionAt(e.start+e.length),t=o.lineNumber,s=o.column,f=u.lineNumber,c=u.column;return{startLineNumber:t,startColumn:s,endLineNumber:f,endColumn:c}},n}(),A;(function(n){n[n.Warning=0]="Warning",n[n.Error=1]="Error",n[n.Suggestion=2]="Suggestion",n[n.Message=3]="Message"})(A||(A={}));var K=function(n){w(i,n);function i(e,o,u){var t=n.call(this,u)||this;t._defaults=e,t._selector=o,t._disposables=[],t._listener=Object.create(null);var s=function(r){if(r.getModeId()===o){var a,l=r.onDidChangeContent(function(){clearTimeout(a),a=setTimeout(function(){return t._doValidate(r)},500)});t._listener[r.uri.toString()]={dispose:function(){l.dispose(),clearTimeout(a)}},t._doValidate(r)}},f=function(r){monaco.editor.setModelMarkers(r,t._selector,[]);var a=r.uri.toString();t._listener[a]&&(t._listener[a].dispose(),delete t._listener[a])};t._disposables.push(monaco.editor.onDidCreateModel(s)),t._disposables.push(monaco.editor.onWillDisposeModel(f)),t._disposables.push(monaco.editor.onDidChangeModelLanguage(function(r){f(r.model),s(r.model)})),t._disposables.push({dispose:function(){for(var r=0,a=monaco.editor.getModels();r<a.length;r++){var l=a[r];f(l)}}});var c=function(){for(var r=0,a=monaco.editor.getModels();r<a.length;r++){var l=a[r];f(l),s(l)}};return t._disposables.push(t._defaults.onDidChange(c)),t._disposables.push(t._defaults.onDidExtraLibsChange(c)),monaco.editor.getModels().forEach(s),t}return i.prototype.dispose=function(){this._disposables.forEach(function(e){return e&&e.dispose()}),this._disposables=[]},i.prototype._doValidate=function(e){return y(this,void 0,void 0,function(){var o,u,t,s,f,c,r,a,l=this;return S(this,function(g){switch(g.label){case 0:return[4,this._worker(e.uri)];case 1:return o=g.sent(),e.isDisposed()?[2]:(u=[],t=this._defaults.getDiagnosticsOptions(),s=t.noSyntaxValidation,f=t.noSemanticValidation,c=t.noSuggestionDiagnostics,s||u.push(o.getSyntacticDiagnostics(e.uri.toString())),f||u.push(o.getSemanticDiagnostics(e.uri.toString())),c||u.push(o.getSuggestionDiagnostics(e.uri.toString())),[4,Promise.all(u)]);case 2:return r=g.sent(),!r||e.isDisposed()?[2]:(a=r.reduce(function(p,m){return m.concat(p)},[]).filter(function(p){return(l._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore||[]).indexOf(p.code)===-1}).map(function(p){return l._convertDiagnostics(e,p)}),monaco.editor.setModelMarkers(e,this._selector,a),[2])}})})},i.prototype._convertDiagnostics=function(e,o){var u=o.start||0,t=o.length||1,s=e.getPositionAt(u),f=s.lineNumber,c=s.column,r=e.getPositionAt(u+t),a=r.lineNumber,l=r.column;return{severity:this._tsDiagnosticCategoryToMarkerSeverity(o.category),startLineNumber:f,startColumn:c,endLineNumber:a,endColumn:l,message:O(o.messageText,`
`),code:o.code.toString(),tags:o.reportsUnnecessary?[monaco.MarkerTag.Unnecessary]:[],relatedInformation:this._convertRelatedInformation(e,o.relatedInformation)}},i.prototype._convertRelatedInformation=function(e,o){if(!!o){var u=[];return o.forEach(function(t){var s=e;if(t.file){var f=monaco.Uri.parse(t.file.fileName);s=monaco.editor.getModel(f)}if(!!s){var c=t.start||0,r=t.length||1,a=s.getPositionAt(c),l=a.lineNumber,g=a.column,p=s.getPositionAt(c+r),m=p.lineNumber,h=p.column;u.push({resource:s.uri,startLineNumber:l,startColumn:g,endLineNumber:m,endColumn:h,message:O(t.messageText,`
`)})}}),u}},i.prototype._tsDiagnosticCategoryToMarkerSeverity=function(e){switch(e){case A.Error:return monaco.MarkerSeverity.Error;case A.Message:return monaco.MarkerSeverity.Info;case A.Warning:return monaco.MarkerSeverity.Warning;case A.Suggestion:return monaco.MarkerSeverity.Hint}return monaco.MarkerSeverity.Info},i}(_),E=function(n){w(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"triggerCharacters",{get:function(){return["."]},enumerable:!0,configurable:!0}),i.prototype.provideCompletionItems=function(e,o,u,t){return y(this,void 0,void 0,function(){var s,f,c,r,a,l,g;return S(this,function(p){switch(p.label){case 0:return s=e.getWordUntilPosition(o),f=new N(o.lineNumber,s.startColumn,o.lineNumber,s.endColumn),c=e.uri,r=e.getOffsetAt(o),[4,this._worker(c)];case 1:return a=p.sent(),[4,a.getCompletionsAtPosition(c.toString(),r)];case 2:return l=p.sent(),!l||e.isDisposed()?[2]:(g=l.entries.map(function(m){var h=f;if(m.replacementSpan){var v=e.getPositionAt(m.replacementSpan.start),x=e.getPositionAt(m.replacementSpan.start+m.replacementSpan.length);h=new N(v.lineNumber,v.column,x.lineNumber,x.column)}return{uri:c,position:o,range:h,label:m.name,insertText:m.name,sortText:m.sortText,kind:i.convertKind(m.kind)}}),[2,{suggestions:g}])}})})},i.prototype.resolveCompletionItem=function(e,o,u,t){return y(this,void 0,void 0,function(){var s,f,c,r,a,l;return S(this,function(g){switch(g.label){case 0:return s=u,f=s.uri,c=s.position,r=e.getOffsetAt(c),[4,this._worker(f)];case 1:return a=g.sent(),[4,a.getCompletionEntryDetails(f.toString(),r,s.label)];case 2:return l=g.sent(),!l||e.isDisposed()?[2,s]:[2,{uri:f,position:c,label:l.name,kind:i.convertKind(l.kind),detail:k(l.displayParts),documentation:{value:k(l.documentation)}}]}})})},i.convertKind=function(e){switch(e){case d.primitiveType:case d.keyword:return monaco.languages.CompletionItemKind.Keyword;case d.variable:case d.localVariable:return monaco.languages.CompletionItemKind.Variable;case d.memberVariable:case d.memberGetAccessor:case d.memberSetAccessor:return monaco.languages.CompletionItemKind.Field;case d.function:case d.memberFunction:case d.constructSignature:case d.callSignature:case d.indexSignature:return monaco.languages.CompletionItemKind.Function;case d.enum:return monaco.languages.CompletionItemKind.Enum;case d.module:return monaco.languages.CompletionItemKind.Module;case d.class:return monaco.languages.CompletionItemKind.Class;case d.interface:return monaco.languages.CompletionItemKind.Interface;case d.warning:return monaco.languages.CompletionItemKind.File}return monaco.languages.CompletionItemKind.Property},i}(_),W=function(n){w(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.signatureHelpTriggerCharacters=["(",","],e}return i.prototype.provideSignatureHelp=function(e,o,u){return y(this,void 0,void 0,function(){var t,s,f,c,r;return S(this,function(a){switch(a.label){case 0:return t=e.uri,s=e.getOffsetAt(o),[4,this._worker(t)];case 1:return f=a.sent(),[4,f.getSignatureHelpItems(t.toString(),s)];case 2:return c=a.sent(),!c||e.isDisposed()?[2]:(r={activeSignature:c.selectedItemIndex,activeParameter:c.argumentIndex,signatures:[]},c.items.forEach(function(l){var g={label:"",parameters:[]};g.documentation=k(l.documentation),g.label+=k(l.prefixDisplayParts),l.parameters.forEach(function(p,m,h){var v=k(p.displayParts),x={label:v,documentation:k(p.documentation)};g.label+=v,g.parameters.push(x),m<h.length-1&&(g.label+=k(l.separatorDisplayParts))}),g.label+=k(l.suffixDisplayParts),r.signatures.push(g)}),[2,{value:r,dispose:function(){}}])}})})},i}(_),V=function(n){w(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.provideHover=function(e,o,u){return y(this,void 0,void 0,function(){var t,s,f,c,r,a,l;return S(this,function(g){switch(g.label){case 0:return t=e.uri,s=e.getOffsetAt(o),[4,this._worker(t)];case 1:return f=g.sent(),[4,f.getQuickInfoAtPosition(t.toString(),s)];case 2:return c=g.sent(),!c||e.isDisposed()?[2]:(r=k(c.documentation),a=c.tags?c.tags.map(function(p){var m="*@"+p.name+"*";return p.text?m+(p.text.match(/\r\n|\n/g)?` 
`+p.text:" - "+p.text):m}).join(`  

`):"",l=k(c.displayParts),[2,{range:this._textSpanToRange(e,c.textSpan),contents:[{value:"```js\n"+l+"\n```\n"},{value:r+(a?`

`+a:"")}]}])}})})},i}(_),H=function(n){w(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.provideDocumentHighlights=function(e,o,u){return y(this,void 0,void 0,function(){var t,s,f,c,r=this;return S(this,function(a){switch(a.label){case 0:return t=e.uri,s=e.getOffsetAt(o),[4,this._worker(t)];case 1:return f=a.sent(),[4,f.getOccurrencesAtPosition(t.toString(),s)];case 2:return c=a.sent(),!c||e.isDisposed()?[2]:[2,c.map(function(l){return{range:r._textSpanToRange(e,l.textSpan),kind:l.isWriteAccess?monaco.languages.DocumentHighlightKind.Write:monaco.languages.DocumentHighlightKind.Text}})]}})})},i}(_),B=function(n){w(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.provideDefinition=function(e,o,u){return y(this,void 0,void 0,function(){var t,s,f,c,r,a,l,g,p,m;return S(this,function(h){switch(h.label){case 0:return t=e.uri,s=e.getOffsetAt(o),[4,this._worker(t)];case 1:return f=h.sent(),[4,f.getDefinitionAtPosition(t.toString(),s)];case 2:if(c=h.sent(),!c||e.isDisposed())return[2];for(r=[],a=0,l=c;a<l.length;a++)g=l[a],p=L.parse(g.fileName),m=monaco.editor.getModel(p),m&&r.push({uri:p,range:this._textSpanToRange(m,g.textSpan)});return[2,r]}})})},i}(_),j=function(n){w(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.provideReferences=function(e,o,u,t){return y(this,void 0,void 0,function(){var s,f,c,r,a,l,g,p,m,h;return S(this,function(v){switch(v.label){case 0:return s=e.uri,f=e.getOffsetAt(o),[4,this._worker(s)];case 1:return c=v.sent(),[4,c.getReferencesAtPosition(s.toString(),f)];case 2:if(r=v.sent(),!r||e.isDisposed())return[2];for(a=[],l=0,g=r;l<g.length;l++)p=g[l],m=L.parse(p.fileName),h=monaco.editor.getModel(m),h&&a.push({uri:m,range:this._textSpanToRange(h,p.textSpan)});return[2,a]}})})},i}(_),U=function(n){w(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.provideDocumentSymbols=function(e,o){return y(this,void 0,void 0,function(){var u,t,s,f,c,r=this;return S(this,function(a){switch(a.label){case 0:return u=e.uri,[4,this._worker(u)];case 1:return t=a.sent(),[4,t.getNavigationBarItems(u.toString())];case 2:return s=a.sent(),!s||e.isDisposed()?[2]:(f=function(l,g,p){var m={name:g.text,detail:"",kind:b[g.kind]||monaco.languages.SymbolKind.Variable,range:r._textSpanToRange(e,g.spans[0]),selectionRange:r._textSpanToRange(e,g.spans[0]),tags:[],containerName:p};if(g.childItems&&g.childItems.length>0)for(var h=0,v=g.childItems;h<v.length;h++){var x=v[h];f(l,x,m.name)}l.push(m)},c=[],s.forEach(function(l){return f(c,l)}),[2,c])}})})},i}(_),d=function(){function n(){}return n.unknown="",n.keyword="keyword",n.script="script",n.module="module",n.class="class",n.interface="interface",n.type="type",n.enum="enum",n.variable="var",n.localVariable="local var",n.function="function",n.localFunction="local function",n.memberFunction="method",n.memberGetAccessor="getter",n.memberSetAccessor="setter",n.memberVariable="property",n.constructorImplementation="constructor",n.callSignature="call",n.indexSignature="index",n.constructSignature="construct",n.parameter="parameter",n.typeParameter="type parameter",n.primitiveType="primitive type",n.label="label",n.alias="alias",n.const="const",n.let="let",n.warning="warning",n}(),b=Object.create(null);b[d.module]=monaco.languages.SymbolKind.Module;b[d.class]=monaco.languages.SymbolKind.Class;b[d.enum]=monaco.languages.SymbolKind.Enum;b[d.interface]=monaco.languages.SymbolKind.Interface;b[d.memberFunction]=monaco.languages.SymbolKind.Method;b[d.memberVariable]=monaco.languages.SymbolKind.Property;b[d.memberGetAccessor]=monaco.languages.SymbolKind.Property;b[d.memberSetAccessor]=monaco.languages.SymbolKind.Property;b[d.variable]=monaco.languages.SymbolKind.Variable;b[d.const]=monaco.languages.SymbolKind.Variable;b[d.localVariable]=monaco.languages.SymbolKind.Variable;b[d.variable]=monaco.languages.SymbolKind.Variable;b[d.function]=monaco.languages.SymbolKind.Function;b[d.localFunction]=monaco.languages.SymbolKind.Function;var C=function(n){w(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i._convertOptions=function(e){return{ConvertTabsToSpaces:e.insertSpaces,TabSize:e.tabSize,IndentSize:e.tabSize,IndentStyle:T.Smart,NewLineCharacter:`
`,InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:!1,InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1,PlaceOpenBraceOnNewLineForFunctions:!1}},i.prototype._convertTextChanges=function(e,o){return{text:o.newText,range:this._textSpanToRange(e,o.span)}},i}(_),z=function(n){w(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.provideDocumentRangeFormattingEdits=function(e,o,u,t){return y(this,void 0,void 0,function(){var s,f,c,r,a,l=this;return S(this,function(g){switch(g.label){case 0:return s=e.uri,f=e.getOffsetAt({lineNumber:o.startLineNumber,column:o.startColumn}),c=e.getOffsetAt({lineNumber:o.endLineNumber,column:o.endColumn}),[4,this._worker(s)];case 1:return r=g.sent(),[4,r.getFormattingEditsForRange(s.toString(),f,c,C._convertOptions(u))];case 2:return a=g.sent(),!a||e.isDisposed()?[2]:[2,a.map(function(p){return l._convertTextChanges(e,p)})]}})})},i}(C),G=function(n){w(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"autoFormatTriggerCharacters",{get:function(){return[";","}",`
`]},enumerable:!0,configurable:!0}),i.prototype.provideOnTypeFormattingEdits=function(e,o,u,t,s){return y(this,void 0,void 0,function(){var f,c,r,a,l=this;return S(this,function(g){switch(g.label){case 0:return f=e.uri,c=e.getOffsetAt(o),[4,this._worker(f)];case 1:return r=g.sent(),[4,r.getFormattingEditsAfterKeystroke(f.toString(),c,u,C._convertOptions(t))];case 2:return a=g.sent(),!a||e.isDisposed()?[2]:[2,a.map(function(p){return l._convertTextChanges(e,p)})]}})})},i}(C),J=function(n){w(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.provideCodeActions=function(e,o,u,t){return y(this,void 0,void 0,function(){var s,f,c,r,a,l,g,p,m=this;return S(this,function(h){switch(h.label){case 0:return s=e.uri,f=e.getOffsetAt({lineNumber:o.startLineNumber,column:o.startColumn}),c=e.getOffsetAt({lineNumber:o.endLineNumber,column:o.endColumn}),r=C._convertOptions(e.getOptions()),a=u.markers.filter(function(v){return v.code}).map(function(v){return v.code}).map(Number),[4,this._worker(s)];case 1:return l=h.sent(),[4,l.getCodeFixesAtPosition(s.toString(),f,c,a,r)];case 2:return g=h.sent(),!g||e.isDisposed()?[2]:(p=g.filter(function(v){return v.changes.filter(function(x){return x.isNewFile}).length===0}).map(function(v){return m._tsCodeFixActionToMonacoCodeAction(e,u,v)}),[2,{actions:p,dispose:function(){}}])}})})},i.prototype._tsCodeFixActionToMonacoCodeAction=function(e,o,u){for(var t=[],s=0,f=u.changes;s<f.length;s++)for(var c=f[s],r=0,a=c.textChanges;r<a.length;r++){var l=a[r];t.push({resource:e.uri,edit:{range:this._textSpanToRange(e,l.span),text:l.newText}})}var g={title:u.description,edit:{edits:t},diagnostics:o.markers,kind:"quickfix"};return g},i}(C),Q=function(n){w(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.provideRenameEdits=function(e,o,u,t){return y(this,void 0,void 0,function(){var s,f,c,r,a,l,g,p,m,h;return S(this,function(v){switch(v.label){case 0:return s=e.uri,f=s.toString(),c=e.getOffsetAt(o),[4,this._worker(s)];case 1:return r=v.sent(),[4,r.getRenameInfo(f,c,{allowRenameOfImportPath:!1})];case 2:if(a=v.sent(),a.canRename===!1)return[2,{edits:[],rejectReason:a.localizedErrorMessage}];if(a.fileToRename!==void 0)throw new Error("Renaming files is not supported.");return[4,r.findRenameLocations(f,c,!1,!1,!1)];case 3:if(l=v.sent(),!l||e.isDisposed())return[2];for(g=[],p=0,m=l;p<m.length;p++)h=m[p],g.push({resource:monaco.Uri.parse(h.fileName),edit:{range:this._textSpanToRange(e,h.textSpan),text:u}});return[2,{edits:g}]}})})},i}(_),D,P;function $(n){P=M(n,"typescript")}function q(n){D=M(n,"javascript")}function X(){return new Promise(function(n,i){if(!D)return i("JavaScript not registered!");n(D)})}function Y(){return new Promise(function(n,i){if(!P)return i("TypeScript not registered!");n(P)})}function M(n,i){var e=new F(i,n),o=function(){for(var u=[],t=0;t<arguments.length;t++)u[t]=arguments[t];return e.getLanguageServiceWorker.apply(e,u)};return monaco.languages.registerCompletionItemProvider(i,new E(o)),monaco.languages.registerSignatureHelpProvider(i,new W(o)),monaco.languages.registerHoverProvider(i,new V(o)),monaco.languages.registerDocumentHighlightProvider(i,new H(o)),monaco.languages.registerDefinitionProvider(i,new B(o)),monaco.languages.registerReferenceProvider(i,new j(o)),monaco.languages.registerDocumentSymbolProvider(i,new U(o)),monaco.languages.registerDocumentRangeFormattingEditProvider(i,new z(o)),monaco.languages.registerOnTypeFormattingEditProvider(i,new G(o)),monaco.languages.registerCodeActionProvider(i,new J(o)),monaco.languages.registerRenameProvider(i,new Q(o)),new K(n,i,o),o}export{X as getJavaScriptWorker,Y as getTypeScriptWorker,q as setupJavaScript,$ as setupTypeScript};
